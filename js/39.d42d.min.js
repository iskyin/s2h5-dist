(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{350:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return T}));var r=n(93),a=n.n(r),o=(n(537),n(536)),i=(n(319),n(139)),s=(n(589),n(590)),c=(n(320),n(140)),l=n(45),u=n.n(l),f=n(46),d=n.n(f),p=n(47),m=n.n(p),h=n(48),b=n.n(h),y=n(317),g=n.n(y),v=n(49),C=n.n(v),O=n(73),k=n.n(O),w=n(0),E=n.n(w),j=n(50),S=n(36),P=n(604);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){function t(e){var n;u()(this,t),n=m()(this,b()(t).call(this,e)),k()(g()(n),"formRef",E.a.createRef()),k()(g()(n),"timer",null);var r=n.props.formData,a=void 0===r?{}:r;return n.state={smsCodeCount:0,submitDisabled:n.getDisableBtnStatus(a),smsCodeDisabled:!a.userPhone,loading:!1,prevUserPhone:[],formData:x({},a)},n}return C()(t,e),d()(t,[{key:"onSubmit",value:function(){var e=this;this.formRef.current.validateFields().then((function(t){e.setState({loading:!0}),e.checkRegister(t).then((function(n){e.setState({loading:!1}),e.props.onFinish(t)})).catch((function(){e.setState({loading:!1})}))})).catch((function(e){console.log(e)}))}},{key:"checkRegister",value:function(e){var t=this.formRef.current;return Object(j.a)(S.a.validSms).post({phone:e.userPhone,code:e.smsCode,email:e.email}).catch((function(e){return 5501===e.code?t.setFields([{name:"smsCode",errors:[e.message]}]):5502===e.code?t.setFields([{name:"email",errors:[e.message]}]):5510===e.code?t.setFields([{name:"userPhone",errors:[e.message]}]):5500!==e.code&&5503!==e.code||c.a.error(e.message||"操作失败，请重试"),Promise.reject(e)}))}},{key:"getDisableBtnStatus",value:function(e){return!(e.email&&e.userPhone&&e.smsCode)}},{key:"getSmsCode",value:function(){var e=this,t=this.formRef.current,n=t.getFieldValue(["userPhone"]);if(n){if(/^1[0-9]{10}$/.test(n)){var r=(this.state.prevUserPhone||[]).slice();return r.push(n),this.setState({smsCodeDisabled:!0,prevUserPhone:r}),t.setFields([{name:"smsCode",value:""}]),Object(j.a)(S.a.sendSms).get({phone:n}).then((function(t){e.setState({smsCodeDisabled:!1,isCounting:!0}),c.a.success("短信验证码发送成功");var n=60;e.setState({smsCodeCount:n}),clearInterval(e.timer),e.timer=setInterval((function(){n--,e.setState({smsCodeCount:n}),0===n&&clearInterval(e.timer)}),1e3)})).catch((function(t){return e.setState({smsCodeDisabled:!1}),5505===t.code?c.a.error("短信验证码发送失败，请重新获取"):5508===t.code?c.a.error("请勿重复获取短信验证码"):5500===t.code&&c.a.error("操作失败，请重试"),Promise.reject(t)}))}t.setFields([{name:"userPhone",errors:["请输入正确的手机号"]}])}else t.setFields([{name:"userPhone",errors:["请输入手机号码"]}])}},{key:"onValuesChange",value:function(e,t){this.setState({submitDisabled:this.getDisableBtnStatus(t),smsCodeDisabled:!t.userPhone,isCounting:this.state.prevUserPhone.indexOf(t.userPhone)>=0})}},{key:"render",value:function(){var e=this.state,t=e.smsCodeCount,n=e.smsCodeDisabled,r=e.submitDisabled,c=e.formData,l=e.isCounting;return E.a.createElement(i.a,a()({className:"form-wrap"},{labelCol:{flex:"0 0 82px"},wrapperCol:{flex:"1 0 auto"}},{ref:this.formRef,onValuesChange:this.onValuesChange.bind(this),initialValues:c}),E.a.createElement("div",{className:"form-content"},E.a.createElement("div",null,E.a.createElement(i.a.Item,{name:"email",label:"工作邮箱",rules:[{required:!0,message:"请输入工作邮箱"},{type:"email",message:"请输入正确的工作邮箱"}]},E.a.createElement(s.a,{placeholder:"请输入工作邮箱",maxLength:100})),E.a.createElement(i.a.Item,{name:"userPhone",label:"手机号码",rules:Object(P.b)([{required:!0,message:"请输入手机号码"},{type:P.a.phone,message:"请输入正确的手机号"}])},E.a.createElement(s.a,{placeholder:"请输入手机号码",maxLength:11})),E.a.createElement(i.a.Item,{name:"smsCode",label:"验证码",rules:Object(P.b)([{required:!0,message:"请输入验证码"},{type:P.a.integer,length:6,message:"请输入正确的验证码"}]),wrapperCol:{flex:"1 0 258px"}},E.a.createElement(s.a,{placeholder:"请输入验证码",suffix:0!==t&&l?E.a.createElement(o.a,{disabled:!0},t,"S后重新获取"):E.a.createElement(o.a,{disabled:n,onClick:this.getSmsCode.bind(this)},"获取验证码"),maxLength:6})))),E.a.createElement(i.a.Item,{className:"form-footer"},E.a.createElement(o.a,{type:"primary",disabled:r,onClick:this.onSubmit.bind(this),loading:this.state.loading},"下一步")))}}]),t}(E.a.Component)},536:function(e,t,n){"use strict";var r=n(0),a=n(3),o=n.n(a),i=n(53),s=n.n(i),c=n(13),l=n(94),u=n(550),f=n(37),d=n(9),p=n(66);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var O=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},k=/^[\u4e00-\u9fa5]{2}$/,w=k.test.bind(k);function E(e,t){var n=!1,a=[];return r.Children.forEach(e,(function(e){var t=C(e),r="string"===t||"number"===t;if(n&&r){var o=a.length-1,i=a[o];a[o]="".concat(i).concat(e)}else a.push(e);n=r})),r.Children.map(a,(function(e){return function(e,t){if(null!=e){var n=t?" ":"";return"string"!=typeof e&&"number"!=typeof e&&"string"==typeof e.type&&w(e.props.children)?r.cloneElement(e,{},e.props.children.split("").join(n)):"string"==typeof e?(w(e)&&(e=e.split("").join(n)),r.createElement("span",null,e)):e}}(e,t)}))}Object(f.a)("default","primary","ghost","dashed","danger","link"),Object(f.a)("circle","circle-outline","round"),Object(f.a)("submit","button","reset");var j=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=y(this,g(t).call(this,e))).saveButtonRef=function(e){n.buttonNode=e},n.handleClick=function(e){var t=n.state.loading,r=n.props.onClick;t||r&&r(e)},n.state={loading:e.loading,hasTwoCNChar:!1},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){this.fixTwoCNChar()}},{key:"componentDidUpdate",value:function(e){var t=this;this.fixTwoCNChar(),e.loading&&"boolean"!=typeof e.loading&&clearTimeout(this.delayTimeout);var n=this.props.loading;n&&"boolean"!=typeof n&&n.delay?this.delayTimeout=window.setTimeout((function(){t.setState({loading:n})}),n.delay):e.loading!==n&&this.setState({loading:n})}},{key:"componentWillUnmount",value:function(){this.delayTimeout&&clearTimeout(this.delayTimeout)}},{key:"fixTwoCNChar",value:function(){var e=this.context.autoInsertSpaceInButton;if(this.buttonNode&&!1!==e){var t=this.buttonNode.textContent;this.isNeedInserted()&&w(t)?this.state.hasTwoCNChar||this.setState({hasTwoCNChar:!0}):this.state.hasTwoCNChar&&this.setState({hasTwoCNChar:!1})}}},{key:"isNeedInserted",value:function(){var e=this.props,t=e.icon,n=e.children,a=e.type;return 1===r.Children.count(n)&&!t&&"link"!==a}},{key:"render",value:function(){var e=this,t=this.context,n=t.getPrefixCls,a=t.autoInsertSpaceInButton,i=t.direction;return r.createElement(p.b.Consumer,null,(function(t){var l,f=e.props,p=f.prefixCls,b=f.type,y=f.danger,g=f.shape,v=f.size,C=f.className,k=f.children,w=f.icon,j=f.ghost,S=f.block,P=O(f,["prefixCls","type","danger","shape","size","className","children","icon","ghost","block"]),N=e.state,x=N.loading,T=N.hasTwoCNChar;Object(d.a)(!("string"==typeof w&&w.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(w,"` at https://ant.design/components/icon"));var D=n("btn",p),I=!1!==a,_="";switch(v||t){case"large":_="lg";break;case"small":_="sm"}var R=x?"loading":w,$=o()(D,C,(h(l={},"".concat(D,"-").concat(b),b),h(l,"".concat(D,"-").concat(g),g),h(l,"".concat(D,"-").concat(_),_),h(l,"".concat(D,"-icon-only"),!k&&0!==k&&R),h(l,"".concat(D,"-loading"),!!x),h(l,"".concat(D,"-background-ghost"),j),h(l,"".concat(D,"-two-chinese-chars"),T&&I),h(l,"".concat(D,"-block"),S),h(l,"".concat(D,"-dangerous"),!!y),h(l,"".concat(D,"-rtl"),"rtl"===i),l)),A=x?r.createElement(s.a,null):w||null,L=k||0===k?E(k,e.isNeedInserted()&&I):null,B=Object(c.a)(P,["htmlType","loading"]);if(void 0!==B.href)return r.createElement("a",m({},B,{className:$,onClick:e.handleClick,ref:e.saveButtonRef}),A,L);var F=P,U=F.htmlType,V=O(F,["htmlType"]),W=r.createElement("button",m({},Object(c.a)(V,["loading"]),{type:U,className:$,onClick:e.handleClick,ref:e.saveButtonRef}),A,L);return"link"===b?W:r.createElement(u.a,null,W)}))}}])&&b(n.prototype,a),i&&b(n,i),t}(r.Component);j.__ANT_BUTTON=!0,j.contextType=l.b,j.defaultProps={loading:!1,ghost:!1,block:!1,htmlType:"button"};var S=j;function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},T=function(e){return r.createElement(l.a,null,(function(t){var n,a=t.getPrefixCls,i=t.direction,s=e.prefixCls,c=e.size,l=e.className,u=x(e,["prefixCls","size","className"]),f=a("btn-group",s),d="";switch(c){case"large":d="lg";break;case"small":d="sm"}var p=o()(f,(N(n={},"".concat(f,"-").concat(d),d),N(n,"".concat(f,"-rtl"),"rtl"===i),n),l);return r.createElement("div",P({},u,{className:p}))}))};S.Group=T;t.a=S},550:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r,a=n(0),o=n(7),i=n(55),s=n(591),c=n(94);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?m(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return!e||null===e.offsetParent}function y(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(t&&t[1]&&t[2]&&t[3])||!(t[1]===t[2]&&t[2]===t[3])}var g=function(e){function t(){var e;return u(this,t),(e=d(this,p(t).apply(this,arguments))).animationStart=!1,e.destroy=!1,e.onClick=function(t,n){if(!(!t||b(t)||t.className.indexOf("-leave")>=0)){var a=e.props.insertExtraNode;e.extraNode=document.createElement("div");var o=m(e).extraNode;o.className="ant-click-animating-node";var s=e.getAttributeName();t.setAttribute(s,"true"),r=r||document.createElement("style"),n&&"#ffffff"!==n&&"rgb(255, 255, 255)"!==n&&y(n)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(n)&&"transparent"!==n&&(e.csp&&e.csp.nonce&&(r.nonce=e.csp.nonce),o.style.borderColor=n,r.innerHTML="\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ".concat(n,";\n      }"),document.body.contains(r)||document.body.appendChild(r)),a&&t.appendChild(o),i.a.addStartEventListener(t,e.onTransitionStart),i.a.addEndEventListener(t,e.onTransitionEnd)}},e.onTransitionStart=function(t){if(!e.destroy){var n=Object(o.findDOMNode)(m(e));t&&t.target===n&&(e.animationStart||e.resetEffect(n))}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var n=function(n){if("INPUT"!==n.target.tagName&&!b(n.target)){e.resetEffect(t);var r=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,r)}),0),s.a.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=Object(s.a)((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",n,!0),{cancel:function(){t.removeEventListener("click",n,!0)}}}},e.renderWave=function(t){var n=t.csp,r=e.props.children;return e.csp=n,r},e}var n,l,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(l=[{key:"componentDidMount",value:function(){var e=Object(o.findDOMNode)(this);e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroy=!0}},{key:"getAttributeName",value:function(){return this.props.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}},{key:"resetEffect",value:function(e){if(e&&e!==this.extraNode&&e instanceof Element){var t=this.props.insertExtraNode,n=this.getAttributeName();e.setAttribute(n,"false"),r&&(r.innerHTML=""),t&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),i.a.removeStartEventListener(e,this.onTransitionStart),i.a.removeEndEventListener(e,this.onTransitionEnd)}}},{key:"render",value:function(){return a.createElement(c.a,null,this.renderWave)}}])&&f(n.prototype,l),g&&f(n,g),t}(a.Component)},604:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(50),a=Object(r.b)(["registerNo","idCard","phone","enChar","cnChar","integer"]),o=function(e){var t=e.type,n=void 0===t?null:t,r=e.required,o=void 0!==r&&r,i={};if(o&&(i.required=o),!n)return[i];switch(n){case a.registerNo:i.pattern=/^\d{5}$/,i.message="输入不符合注册号格式, 应为5位数字";break;case a.idCard:i.pattern=/(^\d{15}$)|(^\d{17}(\d|X)$)/,i.message="请输入正确的身份证号";break;default:i.type=n}return[i]},i=function(e){return e.map((function(e){var t={};switch(e.type){case a.registerNo:t.pattern=/^\d{5}$/,t.message="输入不符合注册号格式, 应为5位数字";break;case a.idCard:t.pattern=/(^\d{15}$)|(^\d{17}(\d|X)$)/,t.message="请输入正确的身份证号";break;case a.phone:t.pattern=/^1[0-9]{10}$/,t.message="请输入正确的手机号";break;case a.integer:e.length?t.pattern=new RegExp("^\\d{".concat(e.length,"}$")):t.pattern=/^\d+$/,t.message="请输入正确的整数数字";break;case a.cnChar:t.pattern=/^[\u4e00-\u9fa5]+$/,t.message="请输入合法的中文字符";break;case a.enChar:t.pattern=/^[a-zA-Z\s\d]+$/,t.message="请输入合法的英文字符";break;default:return e}return t.message=e.message||t.message,t}))}}}]);